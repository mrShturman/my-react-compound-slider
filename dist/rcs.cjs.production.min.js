"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("warning"),t=require("react"),n=require("d3-array");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(e),o=r(t);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d="react-compound-slider:";function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return t.val>n.val?e?-1:1:n.val>t.val?e?1:-1:0}}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.findIndex((e=>e.key===t));if(-1!==a){var o=e[a],i=o.key,s=o.val;return s===n?e:[...e.slice(0,a),{key:i,val:n},...e.slice(a+1)].sort(c(r))}return e}function p(e,t){if(!e)return[0,0];var n=e.getBoundingClientRect();return[t?n.top:n.left,t?n.bottom:n.right]}function m(e){var t=e.type,n=e.touches;return!n||n.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&n.length>0}function f(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=0,i=e.map((e=>{var t=n.getValue(e);return e!==t&&(o+=1,a.default(!r,"".concat(d," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t})).map(((e,t)=>({key:"$$-".concat(t),val:e}))).sort(c(t));return{handles:i,changes:o}}function y(e,t){return t}function D(e,t){for(var n=0;n<e.length;n++){if(e[n].key!==t[n].key)return e;if(t[n+1]&&t[n].val===t[n+1].val)return e}return t}function T(e,t,n,r,a){for(var o=-1,i=!0,s=0;s<e.length;s++){var l=e[s],u=t[s];if(!u||u.key!==l.key)return e;u.val!==l.val&&(o=s,i=u.val-l.val>0)}if(-1===o)return e;for(var v=i?n:-n,d=0;d<t.length;d++){var c=t[d],p=t[d+1];if(p&&c.val===p.val){if(d===o){var m=p.val+v;if(a(m)===m){var f=T(t,h(t,p.key,p.val+v,r),n,r,a);return f===t?e:f}return e}var g=c.val+v;if(a(g)===g){var y=T(t,h(t,c.key,c.val+v,r),n,r,a);return y===t?e:y}return e}}return t}function M(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>t&&t(e)))}var S=()=>({value:0,percent:0});class b extends t.Component{constructor(){var e;super(...arguments),e=this,this.getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.props,r=n.emitMouse,a=n.emitTouch;return l(l({},t),{},{onMouseDown:M(t&&t.onMouseDown,r),onTouchStart:M(t&&t.onTouchStart,a)})}}render(){var e=this.props,t=e.activeHandleID,n=(0,e.children)({getEventData:e.getEventData||S,activeHandleID:void 0===t?"":t,getRailProps:this.getRailProps});return n&&o.default.Children.only(n)}}class E extends t.Component{constructor(){var e;super(...arguments),e=this,this.autofocus=e=>{e.target instanceof HTMLElement&&e.target.focus()},this.getHandleProps=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.props,a=r.emitKeyboard,o=r.emitMouse,i=r.emitTouch;return l(l({},n),{},{onKeyDown:M(n&&n.onKeyDown,(e=>a&&a(e,t))),onMouseDown:M(n&&n.onMouseDown,e.autofocus,(e=>o&&o(e,t))),onTouchStart:M(n&&n.onTouchStart,(e=>i&&i(e,t)))})}}render(){var e=this.props,t=e.activeHandleID,n=e.handles,r=(0,e.children)({handles:void 0===n?[]:n,activeHandleID:void 0===t?"":t,getHandleProps:this.getHandleProps});return r&&o.default.Children.only(r)}}class w{constructor(){this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}createInterpolator(e,t){var n=e[0],r=e[1],a=t[0],o=t[1];return r<n?e=>this.interpolateValue(o,a)(this.deinterpolateValue(r,n)(e)):e=>this.interpolateValue(a,o)(this.deinterpolateValue(n,r)(e))}interpolateValue(e,t){return t-=e=+e,function(n){return e+t*n}}deinterpolateValue(e,t){return(t-=e=+e)?n=>(n-e)/t:()=>t}rescale(){return this.interpolator=null,this}getValue(e){return(this.interpolator||(this.interpolator=this.createInterpolator(this.domain,this.range)))(+e)}setDomain(e){return this.domain=[e[0],e[1]],this.rescale(),this}getDomain(){return this.domain}setRange(e){return this.range=[e[0],e[1]],this}getRange(){return this.range}getTicks(e){var t=this.domain;return n.ticks(t[0],t[t.length-1],e||10)}}var k=()=>({value:0,percent:0});class I extends t.Component{render(){var e=this.props,t=e.children,n=e.values,r=e.scale,a=void 0===r?new w:r,i=e.count,s=e.getEventData,l=e.activeHandleID,u=t({getEventData:void 0===s?k:s,activeHandleID:void 0===l?"":l,ticks:(n||a.getTicks(void 0===i?10:i)).map((e=>({id:"$$-".concat(e),value:e,percent:a.getValue(e)})))});return u&&o.default.Children.only(u)}}var P=()=>({value:0,percent:0});class x extends t.Component{constructor(){super(...arguments),this.getTrackProps=e=>{var t=this.props,n=t.emitMouse,r=t.emitTouch;return l(l({},e||{}),{},{onMouseDown:M(e&&e.onMouseDown,n),onTouchStart:M(e&&e.onTouchStart,r)})}}render(){for(var e=this.getTrackProps,t=this.props,n=t.children,r=t.left,a=void 0===r||r,i=t.right,s=void 0===i||i,l=t.scale,u=void 0===l?new w:l,v=t.handles,d=void 0===v?[]:v,c=t.getEventData,h=void 0===c?P:c,p=t.activeHandleID,m=void 0===p?"":p,f=u.getDomain(),g=[],y=0;y<d.length+1;y++){var D=d[y-1],T=d[y];0===y&&!0===a?D={id:"$",value:f[0],percent:0}:y===d.length&&!0===s&&(T={id:"$",value:f[1],percent:100}),D&&T&&g.push({id:"".concat(D.id,"-").concat(T.id),source:D,target:T})}var M=n({getEventData:h,activeHandleID:m,tracks:g,getTrackProps:e});return M&&o.default.Children.only(M)}}function H(e,t,n){return Math.min(Math.max(e,t),n)}class O{constructor(){this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=e=>(this.domain=[e[0],e[1]],this),this.setRange=e=>(this.range=[e[0],e[1]],this),this.setStep=e=>(this.step=e,this),this.getValue=e=>{var t=u(this.domain,2),n=t[0],r=t[1],a=u(this.range,2),o=a[0],i=a[1],s=this.step;if((i-o)*(e-n)/(r-n)>Math.floor((i-o)/s)*s)return i;var l=(H(e,n,r)-n)/(r-n);return H(s*Math.round(l*(i-o)/s)+o,o<i?o:i,i>o?i:o)}}}var C="undefined"!=typeof window&&"undefined"!=typeof document,j=()=>{},V=[0,100];exports.Handles=E,exports.Rail=b,exports.Slider=class extends t.PureComponent{constructor(){super(...arguments),this.state={step:.1,values:[],domain:V,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},this.slider=o.default.createRef(),this.onKeyDown=(e,t)=>{var n=["ArrowRight","ArrowUp"],r=["ArrowDown","ArrowLeft"],a=this.state.handles,o=this.props,i=o.step,s=void 0===i?.1:i,l=o.reversed,u=void 0!==l&&l,v=o.vertical,d=void 0!==v&&v,c=o.domain,h=void 0===c?[0,100]:c,p=e.key||"".concat(e.keyCode);if(n.concat(r).includes(p)){if(d){var m=[r,n];n=m[0],r=m[1]}e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var f=a.find((e=>e.key===t));if(f){var g=f.val,y=g;n.includes(p)?y=((e,t,n,r)=>{var a=r?e-t:e+t;return r?Math.max(n[0],a):Math.min(n[1],a)})(g,s,h,u):r.includes(p)&&(y=((e,t,n,r)=>{var a=r?e+t:e-t;return r?Math.min(n[1],a):Math.max(n[0],a)})(g,s,h,u));var D=a.map((e=>e.key===t?{key:e.key,val:y}:e));this.submitUpdate(D,!0)}}},this.onMouseDown=(e,t)=>{this.onStart(e,t,!1)},this.onTouchStart=(e,t)=>{m(e)||this.onStart(e,t,!0)},this.getEventData=(e,t)=>{var n,r=this.state,a=r.pixelToStep,o=r.valueToPerc,i=this.props.vertical;return a.setDomain(p(this.slider.current,i)),t&&e instanceof TouchEvent?n=a.getValue(f(i,e)):e instanceof MouseEvent&&(n=a.getValue(i?e.clientY:e.pageX)),{value:n,percent:o.getValue(n)}},this.onMouseMove=e=>{var t=this.state,n=t.handles,r=t.pixelToStep,a=t.activeHandleID,o=void 0===a?"":a,i=this.props,s=i.vertical,l=i.reversed,u=void 0!==l&&l;r.setDomain(p(this.slider.current,s));var v=h(n,o,r.getValue(s?e.clientY:e.pageX),u);this.submitUpdate(v)},this.onTouchMove=e=>{var t=this.state,n=t.handles,r=t.pixelToStep,a=t.activeHandleID,o=this.props,i=o.vertical,s=o.reversed;if(null!==r&&!m(e)){r.setDomain(p(this.slider.current,i));var l=h(n,a,r.getValue(f(i,e)),s);this.submitUpdate(l)}},this.onMouseUp=()=>{var e=this.state,t=e.handles,n=void 0===t?[]:t,r=e.activeHandleID,a=this.props,o=a.onChange,i=a.onSlideEnd,s=void 0===i?j:i;(void 0===o?j:o)(n.map((e=>e.val))),s(n.map((e=>e.val)),{activeHandleID:r}),this.setState({activeHandleID:""}),C&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp))},this.onTouchEnd=()=>{var e=this.state,t=e.handles,n=e.activeHandleID,r=this.props,a=r.onChange,o=r.onSlideEnd,i=void 0===o?j:o;(void 0===a?j:a)(t.map((e=>e.val))),i(t.map((e=>e.val)),{activeHandleID:n}),this.setState({activeHandleID:""}),C&&(document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}}static getDerivedStateFromProps(e,t){var n,r,o=e.step,i=void 0===o?.1:o,s=e.values,l=e.domain,v=void 0===l?V:l,c=e.reversed,h=void 0!==c&&c,p=e.onUpdate,m=void 0===p?j:p,f=e.onChange,y=void 0===f?j:f,D=e.warnOnChanges,T=void 0!==D&&D,M=t.valueToPerc,S=t.valueToStep,b=t.pixelToStep,E={};if(M&&S&&b||(M=new w,S=new O,b=new O,E.valueToPerc=M,E.valueToStep=S,E.pixelToStep=b),t.domain===V||null===t.step||null===t.domain||null===t.reversed||i!==t.step||v[0]!==t.domain[0]||v[1]!==t.domain[1]||h!==t.reversed){var k=u(v,2),I=k[0],P=k[1];S.setStep(i).setRange([I,P]).setDomain([I,P]),!0===h?(M.setDomain([I,P]).setRange([100,0]),b.setStep(i).setRange([P,I])):(M.setDomain([I,P]).setRange([0,100]),b.setStep(i).setRange([I,P])),a.default(P>I,"".concat(d," Max must be greater than min (even if reversed). Max is ").concat(P,". Min is ").concat(I,"."));var x=g(s||t.values,h,S,T),H=x.handles;(x.changes||void 0===s||s===t.values)&&(m(H.map((e=>e.val))),y(H.map((e=>e.val)))),E.step=i,E.values=s,E.domain=v===V?[...v]:v,E.handles=H,E.reversed=h}else if(!((n=s)===(r=t.values)||n.length===r.length&&n.reduce((e=>(t,n,r)=>t&&e[r]===n)(r),!0))){var C=g(s,h,S,T),L=C.handles;C.changes&&(m(L.map((e=>e.val))),y(L.map((e=>e.val)))),E.values=s,E.handles=L}return Object.keys(E).length?E:null}componentDidMount(){this.state.pixelToStep.setDomain(p(this.slider.current,this.props.vertical))}componentWillUnmount(){this.removeListeners()}removeListeners(){C&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}onStart(e,t,n){var r=this.state.handles,a=this.props.onSlideStart,o=void 0===a?j:a;n||e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),r.find((e=>e.key===t))?(this.setState({activeHandleID:t}),o(r.map((e=>e.val)),{activeHandleID:t}),n?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,n))}handleRailAndTrackClicks(e,t){var n,r=this.state,a=r.handles,o=r.pixelToStep,i=this.props,s=i.vertical,l=i.reversed,u=void 0!==l&&l;o.setDomain(p(this.slider.current,s)),n=o.getValue(t?f(s,e):s?e.clientY:e.pageX);for(var v="",d=Infinity,c=0;c<a.length;c++){var m=a[c],g=m.key,y=Math.abs(m.val-n);y<d&&(v=g,d=y)}var D=h(a,v,n,u);this.setState({activeHandleID:v},(()=>{this.submitUpdate(D,!0),t?this.addTouchEvents():this.addMouseEvents()}))}addMouseEvents(){C&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}addTouchEvents(){C&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}submitUpdate(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,r=n.mode,o=void 0===r?1:r,i=n.step,s=void 0===i?.1:i,l=n.onUpdate,u=void 0===l?j:l,v=n.onChange,c=void 0===v?j:v,h=n.reversed,p=void 0!==h&&h,m=this.state.valueToStep.getValue;this.setState((n=>{var r=n.handles,i=[];if("function"==typeof o)i=o(r,e,s,p,m),a.default(Array.isArray(i),"Custom mode function did not return an array.");else switch(o){case 1:i=y(0,e);break;case 2:i=D(r,e);break;case 3:i=T(r,e,s,p,m);break;default:i=e,a.default(!1,"".concat(d," Invalid mode value."))}return u(i.map((e=>e.val))),t&&c(i.map((e=>e.val))),{handles:i}}))}render(){var e=this.state,n=e.valueToPerc,r=e.activeHandleID,a=this.props,i=a.className,s=a.rootStyle,u=void 0===s?{}:s,v=a.rootProps,d=void 0===v?{}:v,c=a.component,h=void 0===c?"div":c,p=a.disabled,m=void 0!==p&&p,f=a.flatten,g=void 0!==f&&f,y=e.handles.map((e=>{var t=e.val;return{id:e.key,value:t,percent:n.getValue(t)}})),D=o.default.Children.map(this.props.children,(e=>!0===(e=>{if(!t.isValidElement(e))return!1;var n=e.type,r=n?n.name:"";return r===E.name||r===b.name||r===I.name||r===x.name})(e)?o.default.cloneElement(e,{scale:n,handles:y,activeHandleID:r,getEventData:this.getEventData,emitKeyboard:m?j:this.onKeyDown,emitMouse:m?j:this.onMouseDown,emitTouch:m?j:this.onTouchStart}):e));return g?o.default.createElement(o.default.Fragment,null,o.default.createElement(h,l(l({},d),{},{style:u,className:i,ref:this.slider})),D):o.default.createElement(o.default.Fragment,null,o.default.createElement(h,l(l({},d),{},{style:u,className:i,ref:this.slider}),D))}},exports.Ticks=I,exports.Tracks=x,exports.mode1=y,exports.mode2=D,exports.mode3=T;
//# sourceMappingURL=rcs.cjs.production.min.js.map
